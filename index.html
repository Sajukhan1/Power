<!DOCTYPE html>
<html>
<head>
  <title>YouTube Rights Manager</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .login-btn {
      padding: 15px 30px;
      background-color: #ff0000;
      border: none;
      border-radius: 6px;
      color: white;
      font-size: 18px;
      cursor: pointer;
      margin-top: 20px;
    }

    .login-btn:hover {
      background-color: #cc0000;
    }

    #dashboard {
      display: none;
      margin-top: 50px;
    }

    iframe {
      width: 90vw;
      height: 80vh;
      border: none;
      border-radius: 12px;
    }
  </style>
</head>
<body>
  <h1>YouTube Rights Manager</h1>
  <button class="login-btn" onclick="login()">Login with Google</button>

  <div id="dashboard">
    <h2>âœ… Logged In</h2>
    <iframe id="cmsFrame"></iframe>
  </div>

  <script>
    const clientId = "85663030723-3j3l4cv4c28jv62kbp5vslj4cu6o59nu.apps.googleusercontent.com";
    const redirectUri = window.location.origin + window.location.pathname;

    const scopes = [
      "https://www.googleapis.com/auth/youtube.force-ssl",
      "https://www.googleapis.com/auth/youtube.readonly",
      "https://www.googleapis.com/auth/youtubepartner",
      "https://www.googleapis.com/auth/youtubepartner-channel-audit",
      "https://www.googleapis.com/auth/youtube",
      "https://www.googleapis.com/auth/youtube.upload",
      "https://www.googleapis.com/auth/youtube.channel-memberships.creator"
    ].join(" ");

    function login() {
      const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=token&scope=${encodeURIComponent(scopes)}&include_granted_scopes=true`;
      window.location.href = authUrl;
    }

    function getAccessTokenFromUrl() {
      const hash = window.location.hash.substr(1);
      const result = {};
      hash.split("&").forEach(part => {
        const [key, value] = part.split("=");
        result[key] = decodeURIComponent(value);
      });
      return result.access_token;
    }

    window.onload = () => {
      const token = getAccessTokenFromUrl();
      if (token) {
        document.querySelector(".login-btn").style.display = "none";
        document.getElementById("dashboard").style.display = "block";
        localStorage.setItem("yt_token", token);
        document.getElementById("cmsFrame").src = "cms.html?token=" + token;
      }
    };
  </script>
</body>
</html>
